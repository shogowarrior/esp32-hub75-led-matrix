<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>LED Matrix</title>
  <link rel="stylesheet" href="frontend.css">
</head>

<body>
  <!-- App Header - Now outside of categories -->
  <div class="app-header">
    <div class="header-left">
      <button id="power-btn" class="power">OFF</button>
    </div>
    <div class="header-right">
      <h1>LED Matrix</h1>
    </div>
  </div>

  <!-- Brightness Controls - Separate section -->
  <div class="brightness-control-group">
    <span class="material-icons">brightness_6</span>
    <input type="range" id="brightness-slider" min="0" max="255" value="100">
  </div>

  <!-- Action buttons -->
  <div class="action-buttons-group">
    <div class="action-buttons">
      <button id="add-category-btn">Add Category</button>
      <button class="upload-gif-btn" id="show-upload-modal">
        <span class="material-icons">upload</span>
        Image
      </button>
    </div>
  </div>

  <!-- Categories Section -->
  <div class="categories">
    <!-- Categories Header with Playback Toggle -->
    <div class="categories-header">
      <h2>Categories</h2>
      <label class="switch">
        <input type="checkbox" id="category-playback-toggle">
        <span class="slider round"></span>
      </label>
    </div>

    <div id="category-list" class="category-list">
      <!-- Categories will be loaded here -->
    </div>
  </div>

  <!-- Upload Modal -->
  <div class="modal" id="upload-modal">
    <div class="modal-content">
      <div class="modal-header">
        <h2>Upload Image</h2>
        <button class="close-modal" id="close-upload-modal"><span class="material-icons">close</span></button>
      </div>

      <!-- Upload Type Toggle and Category Selection -->
      <div class="upload-type-toggle">
        <div class="upload-type-left">
          <label class="switch">
            <input type="checkbox" id="upload-type-toggle" checked>
            <span class="slider round"></span>
          </label>
          <span id="upload-type-label">Upload to Category</span>
        </div>
        <select id="category-select" class="category-select-inline">
          <option value="" style="font-size: 12px;">Select a category...</option>
        </select>
      </div>

      <div class="file-upload-section">
        <!-- File input is handled by the Upload Image button -->
        <!-- Image Preview Section -->
        <div class="image-preview" id="image-preview" style="display: none;">
          <img id="preview-image" alt="Image Preview">
        </div>
      </div>

      <div id="error-message" class="error-message" style="display: none;"></div>
      <div id="success-message" class="success-message" style="display: none;"></div>

      <div id="resize-progress-container" class="progress-container" style="display: none;">
        <div class="progress-label">Processing image...</div>
        <div id="resize-progress" class="progress-bar" style="width: 0%;"></div>
      </div>

     <div class="upload-buttons">
       <button id="file-upload-btn" class="browse-btn">
         <span class="material-icons">attach_file</span>
         Choose File
       </button>
       <button id="upload-btn" class="upload-button">
         <span class="material-icons">cloud_upload</span>
         Upload Image
       </button>
     </div>
    </div>
  </div>

  <!-- Add Category Modal -->
  <div class="modal" id="add-category-modal">
    <div class="modal-content">
      <div class="modal-header">
        <h2>Add Category</h2>
        <button class="close-modal" data-modal="add-category-modal">
          <span class="material-icons">close</span>
        </button>
      </div>
      <div class="modal-body">
        <div id="error-message" class="error-message" style="display: none;"></div>
        <!-- Add Category Section -->
        <input type="text" id="new-category-name" placeholder="e.g. Funny, Reactions" class="modal-input">
        <div id="add-category-error" class="error-message" style="display: none;"></div>
        <button class="modal-button" id="confirm-add-category">Add</button>
      </div>
    </div>
  </div>

  <!-- Rename Category Modal -->
  <div class="modal" id="rename-category-modal">
    <div class="modal-content">
      <div class="modal-header">
        <h2>Rename Category</h2>
        <button class="close-modal" data-modal="rename-category-modal">
          <span class="material-icons">close</span>
        </button>
      </div>
      <div class="modal-body">
        <input type="text" id="rename-category-input" placeholder="e.g. Funny, Reactions" class="modal-input">
        <button class="modal-button" id="confirm-rename-category">Rename Category</button>
      </div>
    </div>
  </div>

  <!-- Delete Confirmation Modal -->
  <div class="modal" id="delete-confirmation-modal">
    <div class="modal-content">
      <div class="modal-header">
        <h2>Confirm Deletion</h2>
        <button class="close-modal" data-modal="delete-confirmation-modal">
          <span class="material-icons">close</span>
        </button>
      </div>
      <div class="modal-body">
        <p id="delete-confirmation-text">Are you sure you want to delete this category?</p>
        <div class="confirmation-buttons">
          <button class="modal-button cancel-button" id="cancel-delete-category"
            onclick="document.getElementById('delete-confirmation-modal').style.display = 'none'">Cancel</button>
          <button class="modal-button delete-button" id="confirm-delete-category"
            onclick="deleteCategory()">Delete</button>
        </div>
      </div>
    </div>
  </div>

  <div id="loading" class="loading" style="display: none;">
    Loading...
  </div>

  <div id="error-message" class="error-message" style="display: none;"></div>
  <div id="success-message" class="success-message" style="display: none;"></div>

  <script src="frontend.js"></script>
</body>

</html>